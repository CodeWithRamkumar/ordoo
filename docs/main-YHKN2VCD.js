import{a as ie,b as ne,h as re,i as ae}from"./chunk-LBUMAOD3.js";import{a as te,b as g}from"./chunk-GFY2EP7B.js";import{a as oe}from"./chunk-WSADDI35.js";import{a as ge}from"./chunk-NYUSVKWZ.js";import{$ as a,Ab as G,Bb as B,Gb as N,Hb as K,Hc as ue,Ib as Q,J as p,Ja as A,Jb as W,Jc as de,Kb as $,La as T,Lb as J,Lc as fe,M as u,Ma as E,Mb as V,Na as z,O as w,Pa as U,Ra as j,Sa as L,Ta as H,Tb as X,Ua as R,Ub as Y,Wb as Z,Xb as q,Yb as ee,Z as k,_ as r,aa as s,bc as le,ec as ce,fa as f,i as y,j as C,jb as P,l as x,m as b,pa as v,pc as se,q as O,ra as m,sa as M,t as I,u as d,vc as pe,w as S,xb as D,yb as F,zc as me}from"./chunk-QSMVICUT.js";import"./chunk-GAQMLLH7.js";import"./chunk-QUJFQN2Y.js";import"./chunk-GV7ROTFX.js";import"./chunk-WP3PW2FM.js";import"./chunk-RAIJBZAF.js";import"./chunk-TL5KAYV2.js";import"./chunk-5DK6WUVE.js";import"./chunk-N6MIILRQ.js";import"./chunk-VHD5V3JE.js";import"./chunk-3COQWRSL.js";import"./chunk-HGIQAHIR.js";import"./chunk-EPAF7B2K.js";import"./chunk-CU2LIOPH.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EQDF3Z2M.js";import"./chunk-CKP3SGE2.js";import"./chunk-SUU46OAF.js";import"./chunk-XTA6VOZK.js";import"./chunk-ALL2FOAL.js";import"./chunk-7HDUECN2.js";import"./chunk-I3XFR2VW.js";import"./chunk-J7JKH43X.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{i as c}from"./chunk-VBFW7A5V.js";var ve=(()=>{let t=class t{constructor(e){this.toastController=e}showError(e){return c(this,null,function*(){(yield this.toastController.create({message:e,duration:3e3,color:"danger",position:"top"})).present()})}showSuccess(e){return c(this,null,function*(){(yield this.toastController.create({message:e,duration:2e3,color:"success",position:"top"})).present()})}};t.\u0275fac=function(n){return new(n||t)(I(q))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var Ce=(o,t)=>{let h=d(ve),e=d(g);return y(e.getToken()).pipe(b(n=>(n&&(o=o.clone({setHeaders:{Authorization:`Bearer ${n}`}})),t(o).pipe(x(i=>{if(o.url.includes("/auth/login")||o.url.includes("/auth/signup"))return C(()=>i);if(i.status===401)return e.clearUserData(),h.showError("Session expired. Please login again."),window.location.href="http://localhost:8101/",C(()=>new Error("Session expired"));let l="An error occurred";return i.error?.message?l=i.error.message:i.message&&(l=i.message),h.showError(l),C(()=>new Error(l))})))))};var we={apiKey:"AIzaSyC3ALxhHriAWiAMK-Db0-s4r-sHqBlvGLc",authDomain:"ordoo-e4361.firebaseapp.com",projectId:"ordoo-e4361",storageBucket:"ordoo-e4361.firebasestorage.app",messagingSenderId:"225556599172",appId:"1:225556599172:web:a72ee75a88db1627f7cdd1",measurementId:"G-9GQSRHTS0H"};var _=(o,t)=>c(null,null,function*(){let h=d(P),n=yield d(g).getToken();return t.url.includes("/auth/login")||t.url.includes("/auth/signup")||t.url.includes("/auth/forgot-password")||t.url.includes("/auth/reset-password")?n&&(t.url.includes("/auth/login")||t.url.includes("/auth/signup"))?(setTimeout(()=>h.navigateRoot("/workspace"),0),!1):!0:n?!0:(h.navigateRoot("/auth/login"),!1)});var Pe=[{path:"auth",canActivate:[_],loadChildren:()=>import("./chunk-HTL3VIBJ.js").then(o=>o.routes)},{path:"workspace",canActivate:[_],loadChildren:()=>import("./chunk-MLZYNYAV.js").then(o=>o.routes)},{path:"basic-calculator",canActivate:[_],loadComponent:()=>import("./chunk-45KUACUL.js").then(o=>o.BasicCalculatorPage)}];var _e=(()=>{let t=class t{constructor(e,n,i,l,ye,xe){this.menuCtrl=e,this.navCtrl=n,this.authService=i,this.http=l,this.config=ye,this.loader=xe,this.userProfile={name:"Loading...",email:"Loading...",image:"assets/icon/ordoo-logo.svg"},this.showCopied=!1,le({home:pe,person:ue,search:fe,logOut:me,calculator:ce,copy:se,personSharp:de})}ngOnInit(){return c(this,null,function*(){yield this.authService.init(),yield this.loadUserProfile()})}loadUserProfile(){return c(this,null,function*(){let e=yield this.authService.getUserData();console.log("Menu - User data:",e),e.user?(this.userProfile={name:e.profile?.full_name||e.user.email||"User",email:e.user.email||"No email",image:e.profile?.avatar_url||"assets/icon/ordoo-logo.svg"},console.log("Menu - Updated profile:",this.userProfile)):console.log("Menu - No user data found")})}updateUserProfile(){return c(this,null,function*(){yield this.loadUserProfile()})}copyEmail(){return c(this,null,function*(){try{yield navigator.clipboard.writeText(this.userProfile.email),this.showCopied=!0,setTimeout(()=>this.showCopied=!1,2e3)}catch(e){console.error("Failed to copy email:",e)}})}closeMenu(){this.menuCtrl.close("main-menu")}logout(){return c(this,null,function*(){this.closeMenu(),yield this.loader.show("Logging out...");try{yield this.http.post(this.config.AUTH.LOGOUT,{}).toPromise()}catch(e){console.error("Logout API error:",e)}finally{yield this.authService.clearUserData(),yield this.loader.hide(),this.navCtrl.navigateRoot("/auth/login")}})}navigateTo(e){this.navCtrl.navigateRoot(e),this.closeMenu()}isActive(e){return window.location.pathname===e}};t.\u0275fac=function(n){return new(n||t)(u(Z),u(P),u(g),u(T),u(oe),u(ge))},t.\u0275cmp=w({type:t,selectors:[["app-menu"]],decls:35,vars:11,consts:[["contentId","main-content","menuId","main-menu","side","end"],[1,"menu-header"],[1,"profile-section"],[1,"profile-avatar"],["alt","User Profile",3,"src"],[1,"profile-info"],[1,"profile-name"],[1,"email-container"],[1,"profile-email"],[1,"copy-container"],["name","copy",1,"copy-icon",3,"click"],[1,"copy-tooltip"],[1,"menu-content"],["lines","none"],["button","","detail","false",1,"menu-item",3,"click"],["name","person","slot","start",1,"menu-icon"],[1,"menu-label"],["name","home","slot","start",1,"menu-icon"],["name","calculator","slot","start",1,"menu-icon"],[1,"menu-divider"],["name","log-out","slot","start",1,"menu-icon"]],template:function(n,i){n&1&&(r(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"div",2)(4,"ion-avatar",3),s(5,"ion-img",4),a(),r(6,"div",5)(7,"h2",6),m(8),a(),r(9,"div",7)(10,"p",8),m(11),a(),r(12,"div",9)(13,"ion-icon",10),f("click",function(){return i.copyEmail()}),a(),r(14,"span",11),m(15,"Copied!"),a()()()()()()(),r(16,"ion-content",12)(17,"ion-list",13)(18,"ion-item",14),f("click",function(){return i.navigateTo("/profile")}),s(19,"ion-icon",15),r(20,"ion-label",16),m(21,"Profile"),a()(),r(22,"ion-item",14),f("click",function(){return i.navigateTo("/workspace")}),s(23,"ion-icon",17),r(24,"ion-label",16),m(25,"Home"),a()(),r(26,"ion-item",14),f("click",function(){return i.navigateTo("/workspace/calculator-dashboard")}),s(27,"ion-icon",18),r(28,"ion-label",16),m(29,"Calculator"),a()(),s(30,"div",19),r(31,"ion-item",14),f("click",function(){return i.logout()}),s(32,"ion-icon",20),r(33,"ion-label",16),m(34,"Logout"),a()()()()()),n&2&&(p(5),k("src",i.userProfile.image),p(3),M(i.userProfile.name),p(3),M(i.userProfile.email),p(3),v("show",i.showCopied),p(4),v("active-item",i.isActive("/profile")),p(4),v("active-item",i.isActive("/workspace")),p(4),v("active-item",i.isActive("/workspace/calculator-dashboard")))},dependencies:[Q,B,V,K,X,N,J,W,ee,$],styles:["ion-menu[_ngcontent-%COMP%]{--width: 100%;--max-width: 350px}.menu-header[_ngcontent-%COMP%]{--background: var(--ion-color-primary);padding:var(--spacing-md) 0}.menu-header[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]{display:flex;align-items:center;padding:var(--spacing-md);gap:var(--spacing-md)}.menu-header[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{background-color:var(--ion-white-color-background);width:64px;height:64px;border:2px solid var(--ion-white-color-text)}.profile-info[_ngcontent-%COMP%]{flex:1;overflow:hidden}.profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-lg);font-weight:var(--font-weight-bold);color:var(--ion-white-color-text);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.profile-info[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:4px;min-width:0}.profile-info[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%]   .profile-email[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-sm);color:var(--ion-white-color-text);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;min-width:0}.profile-info[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%]   .copy-icon[_ngcontent-%COMP%]{font-size:var(--font-size-base);color:var(--ion-white-color-text);cursor:pointer;flex-shrink:0}.profile-info[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%]   .copy-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.profile-info[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%]   .copy-tooltip[_ngcontent-%COMP%]{position:absolute;top:-30px;left:50%;transform:translate(-50%);background:#000c;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;white-space:nowrap;opacity:0;visibility:hidden;transition:opacity .3s,visibility .3s;z-index:1000}.profile-info[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%]   .copy-tooltip.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.menu-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:8px}.menu-list[_ngcontent-%COMP%]{padding:16px 8px}.menu-item[_ngcontent-%COMP%]{margin:8px 0;border-radius:8px;font-weight:var(--font-weight-medium)}.menu-icon[_ngcontent-%COMP%]{font-size:var(--font-size-3xl);margin-right:16px;color:var(--ion-text-color)}.menu-label[_ngcontent-%COMP%]{font-size:var(--font-size-base);font-weight:var(--font-weight-semibold)}.active-item[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: var(--ion-white-color-text)}.active-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%], .active-item[_ngcontent-%COMP%]   .menu-label[_ngcontent-%COMP%]{color:var(--ion-white-color-text)}.menu-divider[_ngcontent-%COMP%]{height:1px;opacity:.3;background-color:var(--ion-text-color)}"]});let o=t;return o})();var Me=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=w({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[["id","main-content"]],template:function(n,i){n&1&&(r(0,"ion-app"),s(1,"app-menu")(2,"ion-router-outlet",0),a())},dependencies:[G,F,_e],encapsulation:2});let o=t;return o})();A(Me,{providers:[{provide:U,useClass:D},Y(),L(Pe,H(j),R()),E(z([Ce])),S(te.forRoot()),ie(()=>ne(we)),re(()=>ae())]});
