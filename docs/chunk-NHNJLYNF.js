import{Aa as vt,B as re,C as xe,D as G,H as $n,L as M,a as pe,c as Mn,d as Un,e as De,g as _t,h as It,n as xn,o as Fn,q as Vn,s as Le,u as C,v as Me,x as Wn,y as Ue}from"./chunk-DINEKAUJ.js";import{a as mt,b as gt,h as q,i as c}from"./chunk-VBFW7A5V.js";var Hn=()=>{};var zn=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ei=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],u=n[t++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,u=o?n[i+1]:0,a=i+2<n.length,l=a?n[i+2]:0,h=s>>2,p=(s&3)<<4|u>>4,d=(u&15)<<2|l>>6,m=l&63;a||(m=64,o||(d=64)),r.push(t[h],t[p],t[d],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zn(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ei(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||l==null||p==null)throw new Tt;let d=s<<2|u>>4;if(r.push(d),l!==64){let m=u<<4&240|l>>2;if(r.push(m),p!==64){let E=l<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Tt=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ti=function(n){let e=zn(n);return Fe.encodeByteArray(e,!0)},wt=function(n){return Ti(n).replace(/\./g,"")},Ve=function(n){try{return Fe.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var yi=()=>qn().__FIREBASE_DEFAULTS__,wi=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bi=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ve(n[1]);return e&&JSON.parse(e)},bt=()=>{try{return Hn()||yi()||wi()||bi()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Gn=n=>{var e,t;return(t=(e=bt())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]};var At=()=>{var n;return(n=bt())===null||n===void 0?void 0:n.config},kt=n=>{var e;return(e=bt())===null||e===void 0?void 0:e[`_${n}`]};var K=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ge(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Kn(n){return c(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}var me={};function Ai(){let n={prod:[],emulator:[]};for(let e of Object.keys(me))me[e]?n.emulator.push(e):n.prod.push(e);return n}function ki(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Bn=!1;function Jn(n,e){if(typeof window>"u"||typeof document>"u"||!ge(window.location.host)||me[n]===e||me[n]||Bn)return;me[n]=e;function t(d){return`__firebase__banner__${d}`}let r="__firebase__banner",s=Ai().prod.length>0;function o(){let d=document.getElementById(r);d&&d.remove()}function u(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,m){d.setAttribute("width","24"),d.setAttribute("id",m),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){let d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Bn=!0,o()},d}function h(d,m){d.setAttribute("id",m),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function p(){let d=ki(r),m=t("text"),E=document.getElementById(m)||document.createElement("span"),he=t("learnmore"),ne=document.getElementById(he)||document.createElement("a"),fe=t("preprendIcon"),j=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){let z=d.element;u(z),h(ne,he);let Ne=l();a(j,fe),z.append(j,E,ne,Ne),document.body.appendChild(z)}s?(E.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function I(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())}function Xn(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Zn(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Qn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function er(){let n=I();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function We(){try{return typeof indexedDB=="object"}catch{return!1}}function tr(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Si="FirebaseError",T=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Si,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,y.prototype.create)}},y=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Ri(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new T(i,u,r)}};function Ri(n,e){return n.replace(Ci,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Ci=/\{\$([^}]+)}/g;function nr(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function U(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(jn(s)&&jn(o)){if(!U(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function jn(n){return n!==null&&typeof n=="object"}function ie(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rr(n,e){let t=new yt(n,e);return t.subscribe.bind(t)}var yt=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Pi(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Et),i.error===void 0&&(i.error=Et),i.complete===void 0&&(i.complete=Et);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Pi(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Et(){}var Xc=14400*1e3;function x(n){return n&&n._delegate?n._delegate:n}var v=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var J="[DEFAULT]";var St=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new K;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ni(e))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=J){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return c(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=J){return this.instances.has(e)}getOptions(e=J){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(s);r===u&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Oi(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=J){return this.component?this.component.multipleInstances?e:J:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Oi(n){return n===J?void 0:n}function Ni(n){return n.instantiationMode==="EAGER"}var $e=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new St(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Di=[],g=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(g||{}),Li={debug:g.DEBUG,verbose:g.VERBOSE,info:g.INFO,warn:g.WARN,error:g.ERROR,silent:g.SILENT},Mi=g.INFO,Ui={[g.DEBUG]:"log",[g.VERBOSE]:"log",[g.INFO]:"info",[g.WARN]:"warn",[g.ERROR]:"error"},xi=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Ui[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},F=class{constructor(e){this.name=e,this._logLevel=Mi,this._logHandler=xi,this._userLogHandler=null,Di.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in g))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Li[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,g.DEBUG,...e),this._logHandler(this,g.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,g.VERBOSE,...e),this._logHandler(this,g.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,g.INFO,...e),this._logHandler(this,g.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,g.WARN,...e),this._logHandler(this,g.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,g.ERROR,...e),this._logHandler(this,g.ERROR,...e)}};var Fi=(n,e)=>e.some(t=>n instanceof t),ir,sr;function Vi(){return ir||(ir=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wi(){return sr||(sr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var or=new WeakMap,Ct=new WeakMap,ar=new WeakMap,Rt=new WeakMap,Ot=new WeakMap;function $i(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(k(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&or.set(t,n)}).catch(()=>{}),Ot.set(e,n),e}function Hi(n){if(Ct.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ct.set(n,e)}var Pt={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ct.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ar.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return k(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cr(n){Pt=n(Pt)}function Bi(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(He(this),e,...t);return ar.set(r,e.sort?e.sort():[e]),k(r)}:Wi().includes(n)?function(...e){return n.apply(He(this),e),k(or.get(this))}:function(...e){return k(n.apply(He(this),e))}}function ji(n){return typeof n=="function"?Bi(n):(n instanceof IDBTransaction&&Hi(n),Fi(n,Vi())?new Proxy(n,Pt):n)}function k(n){if(n instanceof IDBRequest)return $i(n);if(Rt.has(n))return Rt.get(n);let e=ji(n);return e!==n&&(Rt.set(n,e),Ot.set(e,n)),e}var He=n=>Ot.get(n);function lr(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),u=k(o);return r&&o.addEventListener("upgradeneeded",a=>{r(k(o.result),a.oldVersion,a.newVersion,k(o.transaction),a)}),t&&o.addEventListener("blocked",a=>t(a.oldVersion,a.newVersion,a)),u.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),u}var zi=["get","getKey","getAll","getAllKeys","count"],qi=["put","add","delete","clear"],Nt=new Map;function ur(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nt.get(e))return Nt.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=qi.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zi.includes(t)))return;let s=function(o,...u){return c(this,null,function*(){let a=this.transaction(o,i?"readwrite":"readonly"),l=a.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[t](...u),i&&a.done]))[0]})};return Nt.set(e,s),s}cr(n=>gt(mt({},n),{get:(e,t,r)=>ur(e,t)||n.get(e,t,r),has:(e,t)=>!!ur(e,t)||n.has(e,t)}));var Lt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Gi(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Gi(n){let e=n.getComponent();return e?.type==="VERSION"}var Mt="@firebase/app",dr="0.13.2";var P=new F("@firebase/app"),Ki="@firebase/app-compat",Ji="@firebase/analytics-compat",Yi="@firebase/analytics",Xi="@firebase/app-check-compat",Zi="@firebase/app-check",Qi="@firebase/auth",es="@firebase/auth-compat",ts="@firebase/database",ns="@firebase/data-connect",rs="@firebase/database-compat",is="@firebase/functions",ss="@firebase/functions-compat",os="@firebase/installations",as="@firebase/installations-compat",cs="@firebase/messaging",us="@firebase/messaging-compat",ls="@firebase/performance",ds="@firebase/performance-compat",hs="@firebase/remote-config",fs="@firebase/remote-config-compat",ps="@firebase/storage",ms="@firebase/storage-compat",gs="@firebase/firestore",_s="@firebase/ai",Is="@firebase/firestore-compat",vs="firebase",Es="11.10.0";var Ut="[DEFAULT]",Ts={[Mt]:"fire-core",[Ki]:"fire-core-compat",[Yi]:"fire-analytics",[Ji]:"fire-analytics-compat",[Zi]:"fire-app-check",[Xi]:"fire-app-check-compat",[Qi]:"fire-auth",[es]:"fire-auth-compat",[ts]:"fire-rtdb",[ns]:"fire-data-connect",[rs]:"fire-rtdb-compat",[is]:"fire-fn",[ss]:"fire-fn-compat",[os]:"fire-iid",[as]:"fire-iid-compat",[cs]:"fire-fcm",[us]:"fire-fcm-compat",[ls]:"fire-perf",[ds]:"fire-perf-compat",[hs]:"fire-rc",[fs]:"fire-rc-compat",[ps]:"fire-gcs",[ms]:"fire-gcs-compat",[gs]:"fire-fst",[Is]:"fire-fst-compat",[_s]:"fire-vertex","fire-js":"fire-js",[vs]:"fire-js-all"};var _e=new Map,ys=new Map,xt=new Map;function hr(n,e){try{n.container.addComponent(e)}catch(t){P.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function O(n){let e=n.name;if(xt.has(e))return P.debug(`There were multiple attempts to register component ${e}.`),!1;xt.set(e,n);for(let t of _e.values())hr(t,n);for(let t of ys.values())hr(t,n);return!0}function Be(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function w(n){return n==null?!1:n.settings!==void 0}var ws={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},V=new y("app","Firebase",ws);var Ft=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new v("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw V.create("app-deleted",{appName:this._name})}};var se=Es;function $t(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ut,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw V.create("bad-app-name",{appName:String(i)});if(t||(t=At()),!t)throw V.create("no-options");let s=_e.get(i);if(s){if(U(t,s.options)&&U(r,s.config))return s;throw V.create("duplicate-app",{appName:i})}let o=new $e(i);for(let a of xt.values())o.addComponent(a);let u=new Ft(t,r,o);return _e.set(i,u),u}function ve(n=Ut){let e=_e.get(n);if(!e&&n===Ut&&At())return $t();if(!e)throw V.create("no-app",{appName:n});return e}function je(){return Array.from(_e.values())}function _(n,e,t){var r;let i=(r=Ts[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),P.warn(u.join(" "));return}O(new v(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var bs="firebase-heartbeat-database",As=1,Ie="firebase-heartbeat-store",Dt=null;function gr(){return Dt||(Dt=lr(bs,As,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ie)}catch(t){console.warn(t)}}}}).catch(n=>{throw V.create("idb-open",{originalErrorMessage:n.message})})),Dt}function ks(n){return c(this,null,function*(){try{let t=(yield gr()).transaction(Ie),r=yield t.objectStore(Ie).get(_r(n));return yield t.done,r}catch(e){if(e instanceof T)P.warn(e.message);else{let t=V.create("idb-get",{originalErrorMessage:e?.message});P.warn(t.message)}}})}function fr(n,e){return c(this,null,function*(){try{let r=(yield gr()).transaction(Ie,"readwrite");yield r.objectStore(Ie).put(e,_r(n)),yield r.done}catch(t){if(t instanceof T)P.warn(t.message);else{let r=V.create("idb-set",{originalErrorMessage:t?.message});P.warn(r.message)}}})}function _r(n){return`${n.name}!${n.options.appId}`}var Ss=1024,Rs=30,Vt=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Wt(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return c(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pr();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Rs){let o=Ps(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){P.warn(r)}})}getHeartbeatsHeader(){return c(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=pr(),{heartbeatsToSend:r,unsentEntries:i}=Cs(this._heartbeatsCache.heartbeats),s=wt(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return P.warn(t),""}})}};function pr(){return new Date().toISOString().substring(0,10)}function Cs(n,e=Ss){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),mr(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),mr(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Wt=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return c(this,null,function*(){return We()?tr().then(()=>!0).catch(()=>!1):!1})}read(){return c(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield ks(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return c(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return fr(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return c(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return fr(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function mr(n){return wt(JSON.stringify({version:2,heartbeats:n})).length}function Ps(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Os(n){O(new v("platform-logger",e=>new Lt(e),"PRIVATE")),O(new v("heartbeat",e=>new Vt(e),"PRIVATE")),_(Mt,dr,n),_(Mt,dr,"esm2017"),_("fire-js","")}Os("");var Ns="firebase",Ds="11.10.0";_(Ns,Ds,"app");function Ir(n){n===void 0&&(n=C(re));let e=n.get(xe);return t=>new pe(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let u=t.subscribe({next:a=>{r.next(a),o()},complete:()=>{r.complete(),o()},error:a=>{r.error(a),o()}});return u.add(()=>{r.unsubscribe(),o()}),u})}var ae=new xn("ANGULARFIRE2_VERSION");function Ht(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var qe=(n,e)=>{let t=e?[e]:je(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},oe=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(oe||{}),vr=vt()&&typeof Zone<"u"?oe.WARN:oe.SILENT;var ze=class{zone;delegate;constructor(e,t=Un){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},ce=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=C(M);this.outsideAngular=t.runOutsideAngular(()=>new ze(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ze(typeof Zone>"u"?void 0:Zone.current,Mn))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Vn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Er=!1;function Ls(n,e){!Er&&(vr>oe.SILENT||vt())&&(Er=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),vr>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Ms(n){let e=C(M,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Y(n){let e=C(M,{optional:!0});return e?e.run(()=>n()):n()}var Us=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ue(t,()=>Y(()=>n.apply(void 0,r)))),ue=(n,e,t)=>(t||=e?oe.WARN:oe.VERBOSE,function(){let r,i=arguments,s,o,u;try{s=C(ce),o=C(xe),u=C(Wn)}catch{return Ls(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Y(()=>o.add())),i[l]=Us(i[l],r,u));let a=Ms(()=>n.apply(this,i));return e?a instanceof pe?a.pipe(It(s.outsideAngular),_t(s.insideAngular),Ir(u)):a instanceof Promise?Y(()=>{let l=o.add();return new Promise((h,p)=>{a.then(d=>Ue(u,()=>Y(()=>h(d))),d=>Ue(u,()=>Y(()=>p(d)))).finally(l)})}):typeof a=="function"&&r?function(){return setTimeout(r,0),a.apply(this,arguments)}:Y(()=>a):a instanceof pe?a.pipe(It(s.outsideAngular),_t(s.insideAngular)):Y(()=>a)});var X=class{constructor(e){return e}},Ee=class{constructor(){return je()}};function xs(n){return n&&n.length===1?n[0]:new X(ve())}var Bt=new Le("angularfire2._apps"),Fs={provide:X,useFactory:xs,deps:[[new G,Bt]]},Vs={provide:Ee,deps:[[new G,Bt]]};function Ws(n){return(e,t)=>{let r=t.get($n);_("angularfire",ae.full,"core"),_("angularfire",ae.full,"app"),_("angular",Fn.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new X(i)}}function Yu(n,...e){return Me([Fs,Vs,{provide:Bt,useFactory:Ws(n),multi:!0,deps:[M,re,ce,...e]}])}var Xu=ue($t,!0);var $s=new Map,Hs={activated:!1,tokenObservers:[]},Bs={initialized:!1,enabled:!1};function b(n){return $s.get(n)||Object.assign({},Hs)}function br(){return Bs}var js="https://content-firebaseappcheck.googleapis.com/v1";var zs="exchangeDebugToken",Tr={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},ol=1440*60*1e3;var qt=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return c(this,null,function*(){this.stop();try{this.pending=new K,this.pending.promise.catch(t=>{}),yield qs(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new K,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function qs(n){return new Promise(e=>{setTimeout(e,n)})}var Gs={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},W=new y("appCheck","AppCheck",Gs);function Ar(n){if(!b(n).activated)throw W.create("use-before-activation",{appName:n.name})}function kr(r,i){return c(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let u={method:"POST",body:JSON.stringify(e),headers:s},a;try{a=yield fetch(n,u)}catch(m){throw W.create("fetch-network-error",{originalErrorMessage:m?.message})}if(a.status!==200)throw W.create("fetch-status-error",{httpStatus:a.status});let l;try{l=yield a.json()}catch(m){throw W.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw W.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,d=Date.now();return{token:l.token,expireTimeMillis:d+p,issuedAtTimeMillis:d}})}function Sr(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${js}/projects/${t}/apps/${r}:${zs}?key=${i}`,body:{debug_token:e}}}var Ks="firebase-app-check-database",Js=1,Gt="firebase-app-check-store";var Ge=null;function Ys(){return Ge||(Ge=new Promise((n,e)=>{try{let t=indexedDB.open(Ks,Js);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(W.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Gt,{keyPath:"compositeKey"})}}}catch(t){e(W.create("storage-open",{originalErrorMessage:t?.message}))}}),Ge)}function Xs(n,e){return Zs(Qs(n),e)}function Zs(n,e){return c(this,null,function*(){let r=(yield Ys()).transaction(Gt,"readwrite"),s=r.objectStore(Gt).put({compositeKey:n,value:e});return new Promise((o,u)=>{s.onsuccess=a=>{o()},r.onerror=a=>{var l;u(W.create("storage-set",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})})}function Qs(n){return`${n.options.appId}-${n.name}`}var Te=new F("@firebase/app-check");function jt(n,e){return We()?Xs(n,e).catch(t=>{Te.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Rr(){return br().enabled}function Cr(){return c(this,null,function*(){let n=br();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var eo={error:"UNKNOWN_ERROR"};function to(n){return Fe.encodeString(JSON.stringify(n),!1)}function Kt(n,e=!1,t=!1){return c(this,null,function*(){let r=n.app;Ar(r);let i=b(r),s=i.token,o;if(s&&!ye(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(ye(l)?s=l:yield jt(r,void 0))}if(!e&&s&&ye(s))return{token:s.token};let u=!1;if(Rr())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=kr(Sr(r,yield Cr()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);let l=yield i.exchangeTokenPromise;return yield jt(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Te.warn(l.message):t&&Te.error(l),zt(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),s=yield b(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Te.warn(l.message):t&&Te.error(l),o=l}let a;return s?o?ye(s)?a={token:s.token,internalError:o}:a=zt(o):(a={token:s.token},i.token=s,yield jt(r,s)):a=zt(o),u&&so(r,a),a})}function no(n){return c(this,null,function*(){let e=n.app;Ar(e);let{provider:t}=b(e);if(Rr()){let r=yield Cr(),{token:i}=yield kr(Sr(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function ro(n,e,t,r){let{app:i}=n,s=b(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ye(s.token)){let u=s.token;Promise.resolve().then(()=>{t({token:u.token}),yr(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>yr(n))}function Pr(n,e){let t=b(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function yr(n){let{app:e}=n,t=b(e),r=t.tokenRefresher;r||(r=io(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function io(n){let{app:e}=n;return new qt(()=>c(null,null,function*(){let t=b(e),r;if(t.token?r=yield Kt(n,!0):r=yield Kt(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=b(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Tr.RETRIAL_MIN_WAIT,Tr.RETRIAL_MAX_WAIT)}function so(n,e){let t=b(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ye(n){return n.expireTimeMillis-Date.now()>0}function zt(n){return{token:to(eo),error:n}}var Jt=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=b(this.app);for(let t of e)Pr(this.app,t.next);return Promise.resolve()}};function oo(n,e){return new Jt(n,e)}function ao(n){return{getToken:e=>Kt(n,e),getLimitedUseToken:()=>no(n),addTokenListener:e=>ro(n,"INTERNAL",e),removeTokenListener:e=>Pr(n.app,e)}}var co="@firebase/app-check",uo="0.10.1";var lo="app-check",wr="app-check-internal";function ho(){O(new v(lo,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return oo(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wr).initialize()})),O(new v(wr,n=>{let e=n.getProvider("app-check").getImmediate();return ao(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),_(co,uo)}ho();var fo="app-check";var Ke=class{constructor(){return qe(fo)}};var po=["localhost","0.0.0.0","127.0.0.1"],vl=typeof window<"u"&&po.includes(window.location.hostname);function zr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qr=zr,Gr=new y("auth","Firebase",zr());var et=new F("@firebase/auth");function mo(n,...e){et.logLevel<=g.WARN&&et.warn(`Auth (${se}): ${n}`,...e)}function Ye(n,...e){et.logLevel<=g.ERROR&&et.error(`Auth (${se}): ${n}`,...e)}function R(n,...e){throw mn(n,...e)}function A(n,...e){return mn(n,...e)}function pn(n,e,t){let r=Object.assign(Object.assign({},qr()),{[e]:t});return new y("auth","Firebase",r).create(e,{appName:n.name})}function Z(n){return pn(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function go(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&R(n,"argument-error"),pn(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mn(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Gr.create(n,...e)}function f(n,e,...t){if(!n)throw mn(e,...t)}function N(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ye(e),new Error(e)}function L(n,e){n||N(e)}function Zt(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _o(){return Or()==="http:"||Or()==="https:"}function Or(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Io(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_o()||Zn()||"connection"in navigator)?navigator.onLine:!0}function vo(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Q=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,L(t>e,"Short delay should be less than long delay!"),this.isMobile=Yn()||Qn()}get(){return Io()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gn(n,e){L(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var tt=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;N("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;N("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;N("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Eo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var To=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yo=new Q(3e4,6e4);function _n(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function de(s,o,u,a){return c(this,arguments,function*(n,e,t,r,i={}){return Kr(n,i,()=>c(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ie(Object.assign({key:n.config.apiKey},h)).slice(1),d=yield n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:d},l);return Xn()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&ge(n.emulatorConfig.host)&&(m.credentials="include"),tt.fetch()(yield Jr(n,n.config.apiHost,t,p),m)}))})}function Kr(n,e,t){return c(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Eo),e);try{let i=new Qt(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Je(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let u=s.ok?o.errorMessage:o.error.message,[a,l]=u.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Je(n,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw Je(n,"email-already-in-use",o);if(a==="USER_DISABLED")throw Je(n,"user-disabled",o);let h=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw pn(n,h,l);R(n,h)}}catch(i){if(i instanceof T)throw i;R(n,"network-request-failed",{message:String(i)})}})}function wo(s,o,u,a){return c(this,arguments,function*(n,e,t,r,i={}){let l=yield de(n,e,t,r,i);return"mfaPendingCredential"in l&&R(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function Jr(n,e,t,r){return c(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?gn(n.config,i):`${n.config.apiScheme}://${i}`;return To.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var Qt=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(A(this.auth,"network-request-failed")),yo.get())})}};function Je(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=A(n,e,r);return i.customData._tokenResponse=t,i}function bo(n,e){return c(this,null,function*(){return de(n,"POST","/v1/accounts:delete",e)})}function nt(n,e){return c(this,null,function*(){return de(n,"POST","/v1/accounts:lookup",e)})}function we(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function In(n,e=!1){return c(this,null,function*(){let t=x(n),r=yield t.getIdToken(e),i=vn(r);f(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:we(Yt(i.auth_time)),issuedAtTime:we(Yt(i.iat)),expirationTime:we(Yt(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Yt(n){return Number(n)*1e3}function vn(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ve(t);return i?JSON.parse(i):(Ye("Failed to decode base64 JWT payload"),null)}catch(i){return Ye("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Nr(n){let e=vn(n);return f(e,"internal-error"),f(typeof e.exp<"u","internal-error"),f(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ae(n,e,t=!1){return c(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof T&&Ao(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Ao({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var en=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>c(this,null,function*(){yield this.iteration()}),t)}iteration(){return c(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ke=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=we(this.lastLoginAt),this.creationTime=we(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rt(n){return c(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ae(n,nt(t,{idToken:r}));f(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Yr(s.providerUserInfo):[],u=ko(n.providerData,o),a=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!u?.length,h=a?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new ke(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function En(n){return c(this,null,function*(){let e=x(n);yield rt(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function ko(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Yr(n){return n.map(e=>{var{providerId:t}=e,r=De(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function So(n,e){return c(this,null,function*(){let t=yield Kr(n,{},()=>c(null,null,function*(){let r=ie({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield Jr(n,i,"/v1/token",`key=${s}`),u=yield n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let a={method:"POST",headers:u,body:r};return n.emulatorConfig&&ge(n.emulatorConfig.host)&&(a.credentials="include"),tt.fetch()(o,a)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Ro(n,e){return c(this,null,function*(){return de(n,"POST","/v2/accounts:revokeToken",_n(n,e))})}var be=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){f(e.idToken,"internal-error"),f(typeof e.idToken<"u","internal-error"),f(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){f(e.length!==0,"internal-error");let t=Nr(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return c(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(f(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return c(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield So(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(f(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(f(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(f(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return N("not implemented")}};function $(n,e){f(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var H=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=De(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new en(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ke(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return c(this,null,function*(){let t=yield Ae(this,this.stsTokenManager.getToken(this.auth,e));return f(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return In(this,e)}reload(){return En(this)}_assign(e){this!==e&&(f(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){f(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return c(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield rt(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return c(this,null,function*(){if(w(this.auth.app))return Promise.reject(Z(this.auth));let e=yield this.getIdToken();return yield Ae(this,bo(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,u,a,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,d=(i=t.email)!==null&&i!==void 0?i:void 0,m=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,he=(u=t.tenantId)!==null&&u!==void 0?u:void 0,ne=(a=t._redirectEventId)!==null&&a!==void 0?a:void 0,fe=(l=t.createdAt)!==null&&l!==void 0?l:void 0,j=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:z,emailVerified:Ne,isAnonymous:Dn,providerData:ft,stsTokenManager:Ln}=t;f(z&&Ln,e,"internal-error");let Ii=be.fromJSON(this.name,Ln);f(typeof z=="string",e,"internal-error"),$(p,e.name),$(d,e.name),f(typeof Ne=="boolean",e,"internal-error"),f(typeof Dn=="boolean",e,"internal-error"),$(m,e.name),$(E,e.name),$(he,e.name),$(ne,e.name),$(fe,e.name),$(j,e.name);let pt=new n({uid:z,auth:e,email:d,emailVerified:Ne,displayName:p,isAnonymous:Dn,photoURL:E,phoneNumber:m,tenantId:he,stsTokenManager:Ii,createdAt:fe,lastLoginAt:j});return ft&&Array.isArray(ft)&&(pt.providerData=ft.map(vi=>Object.assign({},vi))),ne&&(pt._redirectEventId=ne),pt}static _fromIdTokenResponse(e,t,r=!1){return c(this,null,function*(){let i=new be;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rt(s),s})}static _fromGetAccountInfoResponse(e,t,r){return c(this,null,function*(){let i=t.users[0];f(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Yr(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,u=new be;u.updateFromIdToken(r);let a=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ke(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(a,l),a})}};var Dr=new Map;function D(n){L(n instanceof Function,"Expected a class definition");let e=Dr.get(n);return e?(L(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Dr.set(n,e),e)}var Co=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return c(this,null,function*(){return!0})}_set(t,r){return c(this,null,function*(){this.storage[t]=r})}_get(t){return c(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return c(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),tn=Co;function Xe(n,e,t){return`firebase:${n}:${e}:${t}`}var it=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Xe(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xe("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return c(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield nt(this.auth,{idToken:e}).catch(()=>{});return t?H._fromGetAccountInfoResponse(this.auth,t,e):null}return H._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return c(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return c(this,null,function*(){if(!t.length)return new n(D(tn),e,r);let i=(yield Promise.all(t.map(l=>c(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||D(tn),o=Xe(r,e.config.apiKey,e.name),u=null;for(let l of t)try{let h=yield l._get(o);if(h){let p;if(typeof h=="string"){let d=yield nt(e,{idToken:h}).catch(()=>{});if(!d)break;p=yield H._fromGetAccountInfoResponse(e,d,h)}else p=H._fromJSON(e,h);l!==s&&(u=p),s=l;break}}catch{}let a=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new n(s,e,r):(s=a[0],u&&(yield s._set(o,u.toJSON())),yield Promise.all(t.map(l=>c(null,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function Lr(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ei(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xr(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ni(e))return"Blackberry";if(ri(e))return"Webos";if(Zr(e))return"Safari";if((e.includes("chrome/")||Qr(e))&&!e.includes("edge/"))return"Chrome";if(ti(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Xr(n=I()){return/firefox\//i.test(n)}function Zr(n=I()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qr(n=I()){return/crios\//i.test(n)}function ei(n=I()){return/iemobile/i.test(n)}function ti(n=I()){return/android/i.test(n)}function ni(n=I()){return/blackberry/i.test(n)}function ri(n=I()){return/webos/i.test(n)}function Tn(n=I()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Po(n=I()){var e;return Tn(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Oo(){return er()&&document.documentMode===10}function ii(n=I()){return Tn(n)||ti(n)||ri(n)||ni(n)||/windows phone/i.test(n)||ei(n)}function si(n,e=[]){let t;switch(n){case"Browser":t=Lr(I());break;case"Worker":t=`${Lr(I())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${se}/${r}`}var nn=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,u)=>{try{let a=e(s);o(a)}catch(a){u(a)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return c(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function No(t){return c(this,arguments,function*(n,e={}){return de(n,"GET","/v2/passwordPolicy",_n(n,e))})}var Do=6,rn=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Do,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,u;let a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(t=a.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(u=a.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),a}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var sn=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new st(this),this.idTokenSubscription=new st(this),this.beforeStateQueue=new nn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=D(t)),this._initializationPromise=this.queue(()=>c(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield it.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return c(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return c(this,null,function*(){try{let t=yield nt(this,{idToken:e}),r=yield H._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return c(this,null,function*(){var t;if(w(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===u)&&a?.user&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return f(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return c(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return c(this,null,function*(){try{yield rt(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=vo()}_delete(){return c(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return c(this,null,function*(){if(w(this.app))return Promise.reject(Z(this));let t=e?x(e):null;return t&&f(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return c(this,null,function*(){if(!this._deleted)return e&&f(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>c(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return c(this,null,function*(){return w(this.app)?Promise.reject(Z(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return w(this.app)?Promise.reject(Z(this)):this.queue(()=>c(this,null,function*(){yield this.assertedPersistence.setPersistence(D(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return c(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return c(this,null,function*(){let e=yield No(this),t=new rn(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new y("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return c(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Ro(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return c(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return c(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&D(e)||this._popupRedirectResolver;f(t,this,"argument-error"),this.redirectPersistenceManager=yield it.create(this,[D(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return c(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>c(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return c(this,null,function*(){if(e===this.currentUser)return this.queue(()=>c(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(f(u,this,"internal-error"),u.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let a=e.addObserver(t,r,i);return()=>{o=!0,a()}}else{let a=e.addObserver(t);return()=>{o=!0,a()}}}directlySetCurrentUser(e){return c(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return f(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=si(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return c(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return c(this,null,function*(){var e;if(w(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&mo(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function dt(n){return x(n)}var st=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=rr(t=>this.observer=t)}get next(){return f(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yn={loadJS(){return c(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lo(n){yn=n}function Mo(n){return yn.loadJS(n)}function Uo(){return yn.gapiScript}function oi(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function wn(n,e){let t=Be(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(U(s,e??{}))return i;R(i,"already-initialized")}return t.initialize({options:e})}function xo(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(D);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function bn(n,e,t){let r=dt(n);f(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=ai(e),{host:o,port:u}=Fo(e),a=u===null?"":`:${u}`,l={url:`${s}//${o}${a}/`},h=Object.freeze({host:o,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){f(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),f(U(l,r.config.emulator)&&U(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ge(o)?(Kn(`${s}//${o}${a}`),Jn("Auth",!0)):i||Vo()}function ai(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Fo(n){let e=ai(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Mr(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Mr(o)}}}function Mr(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Vo(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Se=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return N("not implemented")}_getIdTokenResponse(e){return N("not implemented")}_linkToIdToken(e,t){return N("not implemented")}_getReauthenticationResolver(e){return N("not implemented")}};function le(n,e){return c(this,null,function*(){return wo(n,"POST","/v1/accounts:signInWithIdp",_n(n,e))})}var Wo="http://localhost",B=class n extends Se{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):R("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=De(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return le(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,le(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,le(e,t)}buildRequest(){let e={requestUri:Wo,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ie(t)}return e}};var Re=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ee=class extends Re{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},on=class n extends ee{static credentialFromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;return f("providerId"in t&&"signInMethod"in t,"argument-error"),B._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return f(e.idToken||e.accessToken,"argument-error"),B._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return n.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:u}=e;if(!r&&!i&&!t&&!s||!u)return null;try{return new n(u)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}};var $o=(()=>{class n extends ee{constructor(){super("facebook.com")}static credential(t){return B._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com";return n})(),Ho=(()=>{class n extends ee{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return B._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Bo=(()=>{class n extends ee{constructor(){super("twitter.com")}static credential(t,r){return B._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:r,oauthTokenSecret:i}=t;if(!r||!i)return null;try{return n.credential(r,i)}catch{return null}}}n.TWITTER_SIGN_IN_METHOD="twitter.com",n.PROVIDER_ID="twitter.com";return n})();var Ce=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return c(this,null,function*(){let s=yield H._fromIdTokenResponse(e,r,i),o=Ur(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return c(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Ur(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Ur(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var an=class n extends T{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function ci(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?an._fromErrorAndOperation(n,s,e,r):s})}function jo(n,e,t=!1){return c(this,null,function*(){let r=yield Ae(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ce._forOperation(n,"link",r)})}function zo(n,e,t=!1){return c(this,null,function*(){let{auth:r}=n;if(w(r.app))return Promise.reject(Z(r));let i="reauthenticate";try{let s=yield Ae(n,ci(r,i,e,n),t);f(s.idToken,r,"internal-error");let o=vn(s.idToken);f(o,r,"internal-error");let{sub:u}=o;return f(n.uid===u,r,"user-mismatch"),Ce._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&R(r,"user-mismatch"),s}})}function qo(n,e,t=!1){return c(this,null,function*(){if(w(n.app))return Promise.reject(Z(n));let r="signIn",i=yield ci(n,r,e),s=yield Ce._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function An(n,e,t,r){return x(n).onIdTokenChanged(e,t,r)}function kn(n,e,t){return x(n).beforeAuthStateChanged(e,t)}var ot="__sak";var at=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ot,"1"),this.storage.removeItem(ot),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Go=1e3,Ko=10,Jo=(()=>{class n extends at{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ii(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((u,a,l)=>{this.notifyListeners(u,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);Oo()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Ko):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Go)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return c(this,null,function*(){yield q(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return c(this,null,function*(){let r=yield q(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return c(this,null,function*(){yield q(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),ui=Jo;var Yo=(()=>{class n extends at{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Sn=Yo;function Xo(n){return Promise.all(n.map(e=>c(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Zo=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return c(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,u=this.handlersMap[s];if(!u?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let a=Array.from(u).map(h=>c(this,null,function*(){return h(r.origin,o)})),l=yield Xo(a);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Rn(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var cn=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return c(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((u,a)=>{let l=Rn("",20);i.port1.start();let h=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let d=p;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(d.data.response);break;default:clearTimeout(h),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function S(){return window}function Qo(n){S().location.href=n}function li(){return typeof S().WorkerGlobalScope<"u"&&typeof S().importScripts=="function"}function ea(){return c(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function ta(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function na(){return li()?self:null}var di="firebaseLocalStorageDb",ra=1,ct="firebaseLocalStorage",hi="fbase_key",te=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ht(n,e){return n.transaction([ct],e?"readwrite":"readonly").objectStore(ct)}function ia(){let n=indexedDB.deleteDatabase(di);return new te(n).toPromise()}function un(){let n=indexedDB.open(di,ra);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ct,{keyPath:hi})}catch(i){t(i)}}),n.addEventListener("success",()=>c(null,null,function*(){let r=n.result;r.objectStoreNames.contains(ct)?e(r):(r.close(),yield ia(),e(yield un()))}))})}function xr(n,e,t){return c(this,null,function*(){let r=ht(n,!0).put({[hi]:e,value:t});return new te(r).toPromise()})}function sa(n,e){return c(this,null,function*(){let t=ht(n,!1).get(e),r=yield new te(t).toPromise();return r===void 0?null:r.value})}function Fr(n,e){let t=ht(n,!0).delete(e);return new te(t).toPromise()}var oa=800,aa=3,ca=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return c(this,null,function*(){return this.db?this.db:(this.db=yield un(),this.db)})}_withRetries(t){return c(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>aa)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return c(this,null,function*(){return li()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return c(this,null,function*(){this.receiver=Zo._getInstance(na()),this.receiver._subscribe("keyChanged",(t,r)=>c(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>c(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return c(this,null,function*(){var t,r;if(this.activeServiceWorker=yield ea(),!this.activeServiceWorker)return;this.sender=new cn(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return c(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||ta()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return c(this,null,function*(){try{if(!indexedDB)return!1;let t=yield un();return yield xr(t,ot,"1"),yield Fr(t,ot),!0}catch{}return!1})}_withPendingWrite(t){return c(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return c(this,null,function*(){return this._withPendingWrite(()=>c(this,null,function*(){return yield this._withRetries(i=>xr(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return c(this,null,function*(){let r=yield this._withRetries(i=>sa(i,t));return this.localCache[t]=r,r})}_remove(t){return c(this,null,function*(){return this._withPendingWrite(()=>c(this,null,function*(){return yield this._withRetries(r=>Fr(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return c(this,null,function*(){let t=yield this._withRetries(s=>{let o=ht(s,!1).getAll();return new te(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>c(this,null,function*(){return this._poll()}),oa)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),fi=ca;var Cl=oi("rcb"),Pl=new Q(3e4,6e4);function pi(n,e){return e?D(e):(f(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Pe=class extends Se{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return le(e,this._buildIdpRequest())}_linkToIdToken(e,t){return le(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return le(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ua(n){return qo(n.auth,new Pe(n),n.bypassAuthState)}function la(n){let{auth:e,user:t}=n;return f(t,e,"internal-error"),zo(t,new Pe(n),n.bypassAuthState)}function da(n){return c(this,null,function*(){let{auth:e,user:t}=n;return f(t,e,"internal-error"),jo(t,new Pe(n),n.bypassAuthState)})}var ut=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>c(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return c(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:u}=e;if(o){this.reject(o);return}let a={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(u)(a))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ua;case"linkViaPopup":case"linkViaRedirect":return da;case"reauthViaPopup":case"reauthViaRedirect":return la;default:R(this.auth,"internal-error")}}resolve(e){L(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){L(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ha=new Q(2e3,1e4);function Cn(n,e,t){return c(this,null,function*(){if(w(n.app))return Promise.reject(A(n,"operation-not-supported-in-this-environment"));let r=dt(n);go(n,e,Re);let i=pi(r,t);return new fa(r,"signInViaPopup",e,i).executeNotNull()})}var fa=(()=>{class n extends ut{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return c(this,null,function*(){let t=yield this.execute();return f(t,this.auth,"internal-error"),t})}onExecution(){return c(this,null,function*(){L(this.filter.length===1,"Popup operations only handle one event");let t=Rn();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(A(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(A(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(A(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ha.get())};t()}}n.currentPopupAction=null;return n})(),pa="pendingRedirect",Ze=new Map,ln=class n extends ut{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return c(this,null,function*(){let e=Ze.get(this.auth._key());if(!e){try{let r=(yield ma(this.resolver,this.auth))?yield q(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ze.set(this.auth._key(),e)}return this.bypassAuthState||Ze.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return c(this,null,function*(){if(e.type==="signInViaRedirect")return q(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,q(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return c(this,null,function*(){})}cleanUp(){}};function ma(n,e){return c(this,null,function*(){let t=Ia(e),r=_a(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function ga(n,e){Ze.set(n._key(),e)}function _a(n){return D(n._redirectPersistence)}function Ia(n){return Xe(pa,n.config.apiKey,n.name)}function va(n,e,t=!1){return c(this,null,function*(){if(w(n.app))return Promise.reject(Z(n));let r=dt(n),i=pi(r,e),o=yield new ln(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Ea=600*1e3,dn=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ta(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!mi(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(A(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ea&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vr(e))}saveEventToCache(e){this.cachedEventUids.add(Vr(e)),this.lastProcessedEventTime=Date.now()}};function Vr(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mi({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Ta(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mi(n);default:return!1}}function ya(t){return c(this,arguments,function*(n,e={}){return de(n,"GET","/v1/projects",e)})}var wa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ba=/^https?/;function Aa(n){return c(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield ya(n);for(let t of e)try{if(ka(t))return}catch{}R(n,"unauthorized-domain")})}function ka(n){let e=Zt(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!ba.test(t))return!1;if(wa.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Sa=new Q(3e4,6e4);function Wr(){let n=S().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Ra(n){return new Promise((e,t)=>{var r,i,s;function o(){Wr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wr(),t(A(n,"network-request-failed"))},timeout:Sa.get()})}if(!((i=(r=S().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=S().gapi)===null||s===void 0)&&s.load)o();else{let u=oi("iframefcb");return S()[u]=()=>{gapi.load?o():t(A(n,"network-request-failed"))},Mo(`${Uo()}?onload=${u}`).catch(a=>t(a))}}).catch(e=>{throw Qe=null,e})}var Qe=null;function Ca(n){return Qe=Qe||Ra(n),Qe}var Pa=new Q(5e3,15e3),Oa="__/auth/iframe",Na="emulator/auth/iframe",Da={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},La=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ma(n){let e=n.config;f(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?gn(e,Na):`https://${n.config.authDomain}/${Oa}`,r={apiKey:e.apiKey,appName:n.name,v:se},i=La.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ie(r).slice(1)}`}function Ua(n){return c(this,null,function*(){let e=yield Ca(n),t=S().gapi;return f(t,n,"internal-error"),e.open({where:document.body,url:Ma(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Da,dontclear:!0},r=>new Promise((i,s)=>c(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=A(n,"network-request-failed"),u=S().setTimeout(()=>{s(o)},Pa.get());function a(){S().clearTimeout(u),i(r)}r.ping(a).then(a,()=>{s(o)})})))})}var xa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Fa=500,Va=600,Wa="_blank",$a="http://localhost",lt=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Ha(n,e,t,r=Fa,i=Va){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",a=Object.assign(Object.assign({},xa),{width:r.toString(),height:i.toString(),top:s,left:o}),l=I().toLowerCase();t&&(u=Qr(l)?Wa:t),Xr(l)&&(e=e||$a,a.scrollbars="yes");let h=Object.entries(a).reduce((d,[m,E])=>`${d}${m}=${E},`,"");if(Po(l)&&u!=="_self")return Ba(e||"",u),new lt(null);let p=window.open(e||"",u,h);f(p,n,"popup-blocked");try{p.focus()}catch{}return new lt(p)}function Ba(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var ja="__/auth/handler",za="emulator/auth/handler",qa=encodeURIComponent("fac");function $r(n,e,t,r,i,s){return c(this,null,function*(){f(n.config.authDomain,n,"auth-domain-config-required"),f(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:se,eventId:i};if(e instanceof Re){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",nr(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof ee){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let u=o;for(let h of Object.keys(u))u[h]===void 0&&delete u[h];let a=yield n._getAppCheckToken(),l=a?`#${qa}=${encodeURIComponent(a)}`:"";return`${Ga(n)}?${ie(u).slice(1)}${l}`})}function Ga({config:n}){return n.emulator?gn(n,za):`https://${n.authDomain}/${ja}`}var Xt="webStorageSupport",hn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sn,this._completeRedirectFn=va,this._overrideRedirectResult=ga}_openPopup(e,t,r,i){return c(this,null,function*(){var s;L((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield $r(e,t,r,Zt(),i);return Ha(e,o,Rn())})}_openRedirect(e,t,r,i){return c(this,null,function*(){yield this._originValidation(e);let s=yield $r(e,t,r,Zt(),i);return Qo(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(L(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return c(this,null,function*(){let t=yield Ua(e),r=new dn(e);return t.register("authEvent",i=>(f(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xt,{type:Xt},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Xt];o!==void 0&&t(!!o),R(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Aa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ii()||Zr()||Tn()}},gi=hn;var Hr="@firebase/auth",Br="1.10.8";var fn=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return c(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){f(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Ka(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ja(n){O(new v("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;f(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let a={apiKey:o,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:si(n)},l=new sn(r,i,s,a);return xo(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),O(new v("auth-internal",e=>{let t=dt(e.getProvider("auth").getImmediate());return(r=>new fn(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_(Hr,Br,Ka(n)),_(Hr,Br,"esm2017")}var Ya=300,Xa=kt("authIdTokenMaxAge")||Ya,jr=null,Za=n=>e=>c(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Xa)return;let i=t?.token;jr!==i&&(jr=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Pn(n=ve()){let e=Be(n,"auth");if(e.isInitialized())return e.getImmediate();let t=wn(n,{popupRedirectResolver:gi,persistence:[fi,ui,Sn]}),r=kt("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Za(s.toString());kn(t,o,()=>o(t.currentUser)),An(t,u=>o(u))}}let i=Gn("auth");return i&&bn(t,`http://${i}`),t}function Qa(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Lo({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=A("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Qa().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ja("Browser");var _i="auth",Oe=class{constructor(e){return e}},On=class{constructor(){return qe(_i)}};var Nn=new Le("angularfire2.auth-instances");function zc(n,e){let t=Ht(_i,n,e);return t&&new Oe(t)}function qc(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Oe(r)}}var Gc={provide:On,deps:[[new G,Nn]]},Kc={provide:Oe,useFactory:zc,deps:[[new G,Nn],X]};function pd(n,...e){return _("angularfire",ae.full,"auth"),Me([Kc,Gc,{provide:Nn,useFactory:qc(n),multi:!0,deps:[M,re,ce,Ee,[new G,Ke],...e]}])}var md=ue(Pn,!0);var gd=ue(Cn,!0,2);export{Yu as a,Xu as b,on as c,$o as d,Ho as e,Bo as f,Oe as g,pd as h,md as i,gd as j};
