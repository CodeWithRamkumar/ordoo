import{a as gt}from"./chunk-CB4LND3C.js";import{a as ct}from"./chunk-ZQCQEOMW.js";import"./chunk-NHNJLYNF.js";import{b as K}from"./chunk-B7XTWBX7.js";import{a as J}from"./chunk-YZ7OZVHI.js";import{a as st}from"./chunk-DRB3S4YK.js";import{$ as o,$a as N,A as k,Ac as nt,Bb as U,Bc as ot,Cc as rt,Dc as at,Fb as R,Ha as F,Ib as V,J as g,Jc as lt,La as T,M as c,O as E,Qb as q,S,Wb as H,Xa as w,Xb as Y,Ya as L,Yb as $,Z as d,Za as z,_ as i,aa as m,ab as W,ac as Q,bb as j,ea as I,fa as a,fb as D,ga as b,hb as A,ib as G,kc as X,pa as _,pc as Z,qc as tt,ra as l,xc as et,yb as B,z as y,zc as it}from"./chunk-DINEKAUJ.js";import"./chunk-GAQMLLH7.js";import"./chunk-QUJFQN2Y.js";import"./chunk-GV7ROTFX.js";import"./chunk-WP3PW2FM.js";import"./chunk-RAIJBZAF.js";import"./chunk-TL5KAYV2.js";import"./chunk-5DK6WUVE.js";import"./chunk-N6MIILRQ.js";import"./chunk-VHD5V3JE.js";import"./chunk-3COQWRSL.js";import"./chunk-HGIQAHIR.js";import"./chunk-EPAF7B2K.js";import"./chunk-CU2LIOPH.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EQDF3Z2M.js";import"./chunk-CKP3SGE2.js";import"./chunk-SUU46OAF.js";import"./chunk-XTA6VOZK.js";import"./chunk-ALL2FOAL.js";import"./chunk-7HDUECN2.js";import"./chunk-I3XFR2VW.js";import"./chunk-J7JKH43X.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as C,b as M,i as s}from"./chunk-VBFW7A5V.js";function dt(h,p){if(h&1){let x=I();i(0,"app-login-with-otp",39),a("close",function(){y(x);let r=b();return k(r.closeOtpModal())}),o()}if(h&2){let x=b();d("email",x.currentEmail)}}var yt=(()=>{let p=class p{constructor(e,r,t,n,u,P,f,v){this.fb=e,this.navCtrl=r,this.http=t,this.authService=n,this.config=u,this.loader=P,this.firebaseSso=f,this.toastController=v,this.showPassword=!1,this.isOtpModalOpen=!1,this.emailNotExists=!1,this.passwordInvalid=!1,this.currentEmail="",Q({eyeOutline:tt,eyeOffOutline:Z,mailOutline:at,lockClosedOutline:et,checkmarkCircle:X,phonePortraitOutline:lt,logoGoogle:ot,logoFacebook:nt,logoApple:it,logoTwitter:rt}),this.loginForm=this.fb.group({email:["",[w.required,w.email]],password:["",[w.required,w.minLength(6)]],rememberMe:[!1]})}ngOnInit(){}togglePassword(){this.showPassword=!this.showPassword}onLogin(e){return s(this,null,function*(){this.emailNotExists=!1,this.passwordInvalid=!1;let r;if(e)r=M(C({},e),{isSso:!0});else{if(!this.loginForm.valid)return;r={email:this.loginForm.value.email,password:this.loginForm.value.password}}yield this.loader.show("Logging in..."),this.http.post(this.config.AUTH.LOGIN,r).subscribe({next:t=>s(this,null,function*(){console.log("Login response:",t),yield this.authService.saveUserData(t),console.log("User data saved, navigating to workspace"),yield this.loader.hide(),this.navCtrl.navigateRoot("/workspace")}),error:t=>s(this,null,function*(){if(yield this.loader.hide(),e){let n="Login failed";t.status===404?n="User not found. Please sign up first.":t.status===401&&(n="Authentication failed"),yield(yield this.toastController.create({message:n,duration:3e3,color:"danger",position:"top"})).present()}else t.status===404?(this.emailNotExists=!0,this.loginForm.get("email")?.setErrors({serverError:!0})):t.status===401&&(this.passwordInvalid=!0,this.loginForm.get("password")?.setErrors({serverError:!0}))})})})}navigateToSignup(){this.navCtrl.navigateRoot("/auth/signup")}navigateToForgotPassword(){this.navCtrl.navigateRoot("/auth/forgot-password")}loginWithGoogle(){return s(this,null,function*(){try{let e=yield this.firebaseSso.signInWithGoogle();yield this.onLogin(e)}catch(e){console.error("Google login error:",e)}})}loginWithFacebook(){return s(this,null,function*(){try{let e=yield this.firebaseSso.signInWithFacebook();yield this.onLogin(e)}catch(e){console.error("Facebook login error:",e)}})}loginWithApple(){return s(this,null,function*(){try{let e=yield this.firebaseSso.signInWithApple();yield this.onLogin(e)}catch(e){console.error("Apple login error:",e)}})}loginWithTwitter(){return s(this,null,function*(){try{let e=yield this.firebaseSso.signInWithTwitter();yield this.onLogin(e)}catch(e){console.error("Twitter login error:",e)}})}loginWithOTP(){return s(this,null,function*(){let e=this.loginForm.get("email")?.value;if(!e||this.loginForm.get("email")?.invalid){this.loginForm.get("email")?.markAsTouched();return}yield this.loader.show("Sending OTP..."),this.http.post(`${this.config.API_BASE_URL}/auth/send-otp`,{email:e}).subscribe({next:r=>s(this,null,function*(){yield this.loader.hide(),this.currentEmail=e,this.isOtpModalOpen=!0}),error:r=>s(this,null,function*(){yield this.loader.hide(),r.status===404&&(this.emailNotExists=!0,this.loginForm.get("email")?.setErrors({serverError:!0}))})})})}closeOtpModal(){this.isOtpModalOpen=!1}clearEmailError(){this.emailNotExists&&(this.emailNotExists=!1,this.loginForm.get("email")?.setErrors(null))}clearPasswordError(){this.passwordInvalid&&(this.passwordInvalid=!1,this.loginForm.get("password")?.setErrors(null))}};p.\u0275fac=function(r){return new(r||p)(c(D),c(G),c(T),c(K),c(J),c(st),c(ct),c(H))},p.\u0275cmp=E({type:p,selectors:[["app-login"]],decls:56,vars:22,consts:[[1,"login-content",3,"scrollY"],[1,"login-wrapper"],[1,"left-section"],[1,"brand-container"],["src","assets/icon/ordoo-logo.svg","alt","Ordoo Logo",1,"brand-logo"],[1,"brand-title"],[1,"brand-text"],[1,"right-section"],[1,"scrollable-content"],[1,"form-container"],[1,"logo-section"],[1,"logo-circle"],["src","assets/icon/ordoo-logo.svg","alt","Ordoo Logo",1,"logo-icon"],[1,"app-title"],[1,"form-title"],[1,"form-subtitle"],[1,"login-form",3,"ngSubmit","formGroup"],["name","mail-outline",1,"login-floating-icons-left"],["formControlName","email","labelPlacement","floating","type","email","label","Email address","fill","outline","placeholder","Enter email","mode","md",1,"common-input","common-input-design-with-icon-left",3,"ionInput","errorText"],["name","lock-closed-outline",1,"login-floating-icons-left"],["labelPlacement","floating","formControlName","password","label","Password","fill","outline","mode","md","placeholder","Enter password",1,"common-input","common-input-design-with-icon-left-and-right",3,"ionInput","type","errorText"],[1,"login-floating-icons-right",3,"click","name"],[1,"form-options"],[1,"forgot-link",3,"click"],["expand","block","type","submit",1,"login-button",3,"disabled"],[1,"alternative-login"],[1,"otp-link",3,"click"],[1,"divider"],[1,"divider-text"],[1,"sso-buttons"],["mode","md","fill","outline",1,"sso-icon-button",3,"click"],["name","logo-google"],["name","logo-facebook"],["name","logo-apple"],["name","logo-twitter"],[1,"signup-section"],[1,"signup-text"],[1,"signup-link",3,"click"],[3,"didDismiss","isOpen","canDismiss","showBackdrop"],[3,"close","email"]],template:function(r,t){if(r&1&&(i(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,"img",4),i(5,"h2",5),l(6,"Welcome to Ordoo"),o(),i(7,"p",6),l(8,"Organize your world with ease and efficiency"),o()()(),i(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),m(14,"img",12),o(),i(15,"h1",13),l(16,"Ordoo"),o()(),i(17,"h2",14),l(18,"Welcome Back"),o(),i(19,"p",15),l(20,"Please sign in to your account"),o(),i(21,"form",16),a("ngSubmit",function(){return t.onLogin()}),i(22,"ion-item"),m(23,"ion-icon",17),i(24,"ion-input",18),a("ionInput",function(){return t.clearEmailError()}),o()(),i(25,"ion-item"),m(26,"ion-icon",19),i(27,"ion-input",20),a("ionInput",function(){return t.clearPasswordError()}),o(),i(28,"ion-icon",21),a("click",function(){return t.togglePassword()}),o()(),i(29,"div",22)(30,"ion-text",23),a("click",function(){return t.navigateToForgotPassword()}),l(31," Forgot Password? "),o()(),i(32,"ion-button",24),l(33," Login In "),o()(),i(34,"div",25)(35,"ion-text",26),a("click",function(){return t.loginWithOTP()}),l(36," Login with OTP "),o(),i(37,"div",27)(38,"span",28),l(39,"or"),o()(),i(40,"div",29)(41,"ion-button",30),a("click",function(){return t.loginWithGoogle()}),m(42,"ion-icon",31),o(),i(43,"ion-button",30),a("click",function(){return t.loginWithFacebook()}),m(44,"ion-icon",32),o(),i(45,"ion-button",30),a("click",function(){return t.loginWithApple()}),m(46,"ion-icon",33),o(),i(47,"ion-button",30),a("click",function(){return t.loginWithTwitter()}),m(48,"ion-icon",34),o()()(),i(49,"div",35)(50,"p",36),l(51," Don't have an account? "),i(52,"ion-text",37),a("click",function(){return t.navigateToSignup()}),l(53," Sign Up "),o()()()()()()(),i(54,"ion-modal",38),a("didDismiss",function(){return t.closeOtpModal()}),S(55,dt,1,1,"ng-template"),o()()),r&2){let n,u,P,f,v,O;d("scrollY",!1),g(21),d("formGroup",t.loginForm),g(),_("error-item",t.emailNotExists||((n=t.loginForm.get("email"))==null?null:n.invalid)&&((n=t.loginForm.get("email"))==null?null:n.touched)),g(2),_("ion-invalid",t.emailNotExists||((u=t.loginForm.get("email"))==null?null:u.invalid)&&((u=t.loginForm.get("email"))==null?null:u.touched))("ion-touched",t.emailNotExists||((P=t.loginForm.get("email"))==null?null:P.touched)),d("errorText",t.emailNotExists?"Email does not exist":"Please enter a valid email"),g(),_("error-item",t.passwordInvalid||((f=t.loginForm.get("password"))==null?null:f.invalid)&&((f=t.loginForm.get("password"))==null?null:f.touched)),g(2),_("ion-invalid",t.passwordInvalid||((v=t.loginForm.get("password"))==null?null:v.invalid)&&((v=t.loginForm.get("password"))==null?null:v.touched))("ion-touched",t.passwordInvalid||((O=t.loginForm.get("password"))==null?null:O.touched)),d("type",t.showPassword?"text":"password")("errorText",t.passwordInvalid?"Password is invalid":"Password must be at least 6 characters"),g(),d("name",t.showPassword?"eye-off-outline":"eye-outline"),g(4),d("disabled",t.loginForm.invalid),g(22),d("isOpen",t.isOtpModalOpen)("canDismiss",!0)("showBackdrop",!0)}},dependencies:[R,U,$,V,Y,q,B,F,A,N,L,z,W,j,gt],styles:['.login-wrapper[_ngcontent-%COMP%]{display:flex;min-height:100vh}.left-section[_ngcontent-%COMP%]{flex:1;background:var(--ion-color-primary);display:flex;align-items:center;justify-content:center;padding:var(--spacing-2xl);min-height:100vh}@media (max-width: 1024px){.left-section[_ngcontent-%COMP%]{display:none}}.brand-container[_ngcontent-%COMP%]{text-align:center;max-width:400px}.brand-logo[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:var(--spacing-xl);background:var(--ion-white-color-background);border-radius:var(--border-radius-xl);padding:var(--spacing-md);box-shadow:0 8px 32px #0000001a}.brand-title[_ngcontent-%COMP%]{font-size:var(--font-size-11xl);font-weight:var(--font-weight-bold);color:var(--ion-white-color-text);margin:0 0 var(--spacing-md)}.brand-text[_ngcontent-%COMP%]{font-size:var(--font-size-xl);color:var(--ion-white-color-text);margin:0}.right-section[_ngcontent-%COMP%]{flex:1;display:flex;height:100vh;overflow:hidden}.scrollable-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--spacing-lg);min-height:0}.form-container[_ngcontent-%COMP%]{max-width:400px;width:100%;margin:0 auto;padding:var(--spacing-xl) 0;min-height:calc(100vh - 2 * var(--spacing-lg));display:flex;flex-direction:column;justify-content:center}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-md);display:block}@media (min-width: 1024px){.logo-section[_ngcontent-%COMP%]{display:none}}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;background:var(--ion-white-color-background);border-radius:var(--border-radius-lg);display:flex;align-items:center;justify-content:center;margin:0 auto var(--spacing-md);box-shadow:0 4px 16px rgba(var(--ion-color-primary-rgb),.3)}.logo-icon[_ngcontent-%COMP%]{width:40px;height:40px}.app-title[_ngcontent-%COMP%]{font-size:var(--font-size-5xl);font-weight:var(--font-weight-bold);margin:0}.form-title[_ngcontent-%COMP%]{font-size:var(--font-size-5xl);font-weight:var(--font-weight-bold);margin:0 0 var(--spacing-xs);text-align:center}.form-subtitle[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0 0 var(--spacing-xl);font-size:var(--font-size-base);text-align:center}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.error-item[_ngcontent-%COMP%]{--border-color: var(--ion-color-danger) !important;--color: var(--ion-color-danger)}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:var(--font-size-sm);margin-top:-8px;margin-bottom:var(--spacing-md);padding-left:var(--spacing-md)}.login-floating-icons-left[_ngcontent-%COMP%]{position:absolute;top:18px;inset-inline-start:12px;z-index:999;color:var(--ion-text-color)}.login-floating-icons-right[_ngcontent-%COMP%]{position:absolute;top:18px;inset-inline-end:16px;z-index:999;color:var(--ion-text-color)}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.forgot-link[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:var(--font-size-md);cursor:pointer;text-decoration:none;font-weight:var(--font-weight-medium)}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-section[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-md)}.signup-text[_ngcontent-%COMP%]{font-size:var(--font-size-md);margin:0}.signup-link[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:var(--font-weight-semibold);cursor:pointer;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.alternative-login[_ngcontent-%COMP%]{margin-top:var(--spacing-md)}.alternative-login[_ngcontent-%COMP%]   .otp-link[_ngcontent-%COMP%]{display:block;text-align:center;color:var(--ion-color-primary);font-size:var(--font-size-md);font-weight:var(--font-weight-medium);cursor:pointer;text-decoration:none;margin-bottom:var(--spacing-md)}.alternative-login[_ngcontent-%COMP%]   .otp-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.alternative-login[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:var(--spacing-md)}.alternative-login[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .alternative-login[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:var(--ion-color-medium)}.alternative-login[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   .divider-text[_ngcontent-%COMP%]{padding:0 var(--spacing-md);color:var(--ion-color-medium);font-size:var(--font-size-md);white-space:nowrap}.alternative-login[_ngcontent-%COMP%]   .sso-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--spacing-md)}.alternative-login[_ngcontent-%COMP%]   .sso-buttons[_ngcontent-%COMP%]   .sso-icon-button[_ngcontent-%COMP%]{width:40px;height:40px;--border-radius: 50%;--border-color: var(--ion-text-color);--border-width: 1px;--color: var(--ion-text-color);--padding-start: 0;--padding-end: 0}.alternative-login[_ngcontent-%COMP%]   .sso-buttons[_ngcontent-%COMP%]   .sso-icon-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px}ion-modal[_ngcontent-%COMP%]{--width: inherit;--min-width: inherit;--max-width: inherit;--height: inherit;--min-height: auto;--max-height: inherit}']});let h=p;return h})();export{yt as LoginPage};
