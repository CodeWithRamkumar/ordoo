import{a as g}from"./chunk-YBODFWNC.js";import{Qa as u,Ra as f,a as d,s as m,v as c}from"./chunk-TS35J3DX.js";var w=(()=>{let o=class o{constructor(t,e){this.http=t,this.config=e,this.chunkSize=5*1024*1024}uploadLargeFile(t){return t.size<=this.chunkSize?this.uploadSingleFile(t):this.uploadChunkedFile(t)}updateProfile(t){return this.http.put(`${this.config.API_BASE_URL}/user/profile/setup`,t)}uploadSingleFile(t){let e=new FormData;return e.append("file",t),this.http.post(`${this.config.API_BASE_URL}/upload`,e,{reportProgress:!0,observe:"events"})}uploadChunkedFile(t){return new d(e=>{let r=Math.ceil(t.size/this.chunkSize),s=0,k=Date.now().toString(),h=p=>{let l=p*this.chunkSize,S=Math.min(l+this.chunkSize,t.size),z=t.slice(l,S),n=new FormData;n.append("chunk",z),n.append("chunkIndex",p.toString()),n.append("totalChunks",r.toString()),n.append("uploadId",k),n.append("fileName",t.name),this.http.post(`${this.config.API_BASE_URL}/upload-chunk`,n).subscribe({next:a=>{s++;let F=s/r*100;s===r?(e.next({type:u.Response,body:a}),e.complete()):(e.next({type:u.UploadProgress,loaded:F,total:100}),h(p+1))},error:a=>e.error(a)})};h(0)})}};o.\u0275fac=function(e){return new(e||o)(c(f),c(g))},o.\u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"});let i=o;return i})();export{w as a};
