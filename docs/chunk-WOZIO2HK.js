import{a as A}from"./chunk-YZ7OZVHI.js";import{a as J}from"./chunk-DRB3S4YK.js";import{$ as n,$a as S,A as w,Bb as T,Fb as L,Ha as k,Ib as F,J as l,La as b,M as f,O as C,Oa as y,Qb as j,U as v,V as _,Xa as P,Xb as N,Ya as M,Yb as B,Z as h,Za as O,_ as t,aa as d,ab as V,ac as q,bb as E,bc as G,cc as D,ea as x,fa as u,fb as R,ga as m,hb as z,ib as I,kc as U,pc as Y,qc as $,ra as s,xc as H,z as p}from"./chunk-DINEKAUJ.js";import"./chunk-GAQMLLH7.js";import"./chunk-QUJFQN2Y.js";import"./chunk-GV7ROTFX.js";import"./chunk-WP3PW2FM.js";import"./chunk-RAIJBZAF.js";import"./chunk-TL5KAYV2.js";import"./chunk-5DK6WUVE.js";import"./chunk-N6MIILRQ.js";import"./chunk-VHD5V3JE.js";import"./chunk-3COQWRSL.js";import"./chunk-HGIQAHIR.js";import"./chunk-EPAF7B2K.js";import"./chunk-CU2LIOPH.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EQDF3Z2M.js";import"./chunk-CKP3SGE2.js";import"./chunk-SUU46OAF.js";import"./chunk-XTA6VOZK.js";import"./chunk-ALL2FOAL.js";import"./chunk-7HDUECN2.js";import"./chunk-I3XFR2VW.js";import"./chunk-J7JKH43X.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{i as g}from"./chunk-VBFW7A5V.js";function X(a,c){if(a&1){let o=x();t(0,"div",8),d(1,"ion-icon",10),t(2,"h3"),s(3,"Invalid or Expired Link"),n(),t(4,"p"),s(5,"This password reset link is invalid or has expired. Please request a new one."),n(),t(6,"div",11)(7,"ion-text",12),u("click",function(){p(o);let e=m();return w(e.navigateToLogin())}),d(8,"ion-icon",13),s(9," Back to Login "),n()()()}}function Z(a,c){if(a&1){let o=x();t(0,"div",9),d(1,"ion-icon",14),t(2,"h3"),s(3,"Password Reset Successful"),n(),t(4,"p"),s(5,"Your password has been successfully reset. You can now login with your new password."),n(),t(6,"div",11)(7,"ion-text",12),u("click",function(){p(o);let e=m();return w(e.navigateToLogin())}),d(8,"ion-icon",13),s(9," Back to Login "),n()()()}}function ee(a,c){if(a&1){let o=x();t(0,"p",15),s(1,"Enter your new password"),n(),t(2,"form",16),u("ngSubmit",function(){p(o);let e=m();return w(e.onSubmit())}),t(3,"ion-item"),d(4,"ion-icon",17)(5,"ion-input",18),t(6,"ion-icon",19),u("click",function(){p(o);let e=m();return w(e.togglePassword())}),n()(),t(7,"ion-item"),d(8,"ion-icon",17)(9,"ion-input",20),t(10,"ion-icon",19),u("click",function(){p(o);let e=m();return w(e.toggleConfirmPassword())}),n()(),t(11,"ion-button",21),s(12," Reset Password "),n()(),t(13,"div",11)(14,"ion-text",12),u("click",function(){p(o);let e=m();return w(e.navigateToLogin())}),d(15,"ion-icon",13),s(16," Back to Login "),n()()}if(a&2){let o=m();l(2),h("formGroup",o.resetPasswordForm),l(3),h("type",o.showPassword?"text":"password"),l(),h("name",o.showPassword?"eye-off-outline":"eye-outline"),l(3),h("type",o.showConfirmPassword?"text":"password"),l(),h("name",o.showConfirmPassword?"eye-off-outline":"eye-outline"),l(),h("disabled",o.resetPasswordForm.invalid)}}var pe=(()=>{let c=class c{constructor(i,e,r,K,Q,W){this.fb=i,this.navCtrl=e,this.route=r,this.http=K,this.config=Q,this.loader=W,this.showPassword=!1,this.showConfirmPassword=!1,this.token="",this.tokenValid=!0,this.passwordReset=!1,q({lockClosedOutline:H,eyeOutline:$,eyeOffOutline:Y,arrowBackOutline:D,alertCircle:G,checkmarkCircle:U}),this.resetPasswordForm=this.fb.group({password:["",[P.required,P.minLength(8)]],confirmPassword:["",[P.required]]},{validators:this.passwordMatchValidator})}ngOnInit(){this.token=this.route.snapshot.queryParams.token||"",this.token?this.validateToken():this.tokenValid=!1}validateToken(){return g(this,null,function*(){yield this.loader.show("Validating reset link..."),this.http.post(`${this.config.API_BASE_URL}/auth/validate-reset-token`,{token:this.token}).subscribe({next:i=>g(this,null,function*(){yield this.loader.hide(),this.tokenValid=!0}),error:i=>g(this,null,function*(){yield this.loader.hide(),this.tokenValid=!1})})})}passwordMatchValidator(i){let e=i.get("password"),r=i.get("confirmPassword");return e&&r&&e.value!==r.value?(r.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(r?.hasError("passwordMismatch")&&r.setErrors(null),null)}togglePassword(){this.showPassword=!this.showPassword}toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}onSubmit(){return g(this,null,function*(){this.resetPasswordForm.valid&&this.token&&(yield this.loader.show("Resetting password..."),this.http.post(`${this.config.API_BASE_URL}/auth/reset-password`,{token:this.token,newPassword:this.resetPasswordForm.value.password}).subscribe({next:i=>g(this,null,function*(){yield this.loader.hide(),this.passwordReset=!0}),error:i=>g(this,null,function*(){yield this.loader.hide(),this.tokenValid=!1})}))})}navigateToLogin(){this.navCtrl.navigateRoot("/auth/login")}};c.\u0275fac=function(e){return new(e||c)(f(R),f(I),f(y),f(b),f(A),f(J))},c.\u0275cmp=C({type:c,selectors:[["app-reset-password"]],decls:13,vars:3,consts:[[1,"reset-password-content"],[1,"reset-password-wrapper"],[1,"form-container"],[1,"logo-section"],[1,"logo-circle"],["src","assets/icon/ordoo-logo.svg","alt","Ordoo Logo",1,"logo-icon"],[1,"app-title"],[1,"form-title"],[1,"error-message"],[1,"success-message"],["name","alert-circle",1,"error-icon"],[1,"back-to-login"],[1,"back-link",3,"click"],["name","arrow-back-outline"],["name","checkmark-circle",1,"success-icon"],[1,"form-subtitle"],[1,"reset-password-form",3,"ngSubmit","formGroup"],["name","lock-closed-outline",1,"floating-icon-left"],["formControlName","password","labelPlacement","floating","label","New Password","fill","outline","placeholder","Enter new password","mode","md","errorText","Password must be at least 8 characters",1,"common-input","common-input-design-with-icon-left-and-right",3,"type"],[1,"floating-icon-right",3,"click","name"],["formControlName","confirmPassword","labelPlacement","floating","label","Confirm Password","fill","outline","placeholder","Confirm new password","mode","md","errorText","Passwords do not match",1,"common-input","common-input-design-with-icon-left-and-right",3,"type"],["mode","md","expand","block","type","submit",1,"btn-primary",3,"disabled"]],template:function(e,r){e&1&&(t(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,"img",5),n(),t(6,"h1",6),s(7,"Ordoo"),n()(),t(8,"h2",7),s(9,"Reset Password"),n(),v(10,X,10,0,"div",8),v(11,Z,10,0,"div",9),v(12,ee,17,6),n()()()),e&2&&(l(10),_(r.tokenValid?-1:10),l(),_(r.passwordReset?11:-1),l(),_(r.tokenValid&&!r.passwordReset?12:-1))},dependencies:[L,T,B,F,N,j,k,z,S,M,O,V,E],styles:[".reset-password-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:var(--spacing-lg)}.form-container[_ngcontent-%COMP%]{max-width:400px;width:100%}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;background:var(--ion-white-color-background);border-radius:var(--border-radius-lg);display:flex;align-items:center;justify-content:center;margin:0 auto var(--spacing-md);box-shadow:0 4px 16px rgba(var(--ion-color-primary-rgb),.3)}.logo-icon[_ngcontent-%COMP%]{width:50px;height:50px}.app-title[_ngcontent-%COMP%]{font-size:var(--font-size-5xl);font-weight:var(--font-weight-bold);margin:0}.form-title[_ngcontent-%COMP%]{font-size:var(--font-size-5xl);font-weight:var(--font-weight-bold);margin:0 0 var(--spacing-xs);text-align:center}.form-subtitle[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0 0 var(--spacing-xl);font-size:var(--font-size-base);text-align:center}.reset-password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.floating-icon-left[_ngcontent-%COMP%]{position:absolute;top:18px;inset-inline-start:12px;z-index:999;color:var(--ion-text-color)}.floating-icon-right[_ngcontent-%COMP%]{position:absolute;top:18px;inset-inline-end:16px;z-index:999;cursor:pointer;color:var(--ion-text-color)}.back-to-login[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-xl)}.back-link[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:var(--font-size-md);cursor:pointer;text-decoration:none;font-weight:var(--font-weight-medium);display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs)}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.success-message[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl) 0}.success-icon[_ngcontent-%COMP%]{font-size:64px;color:var(--ion-color-success);margin-bottom:var(--spacing-lg)}.success-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:var(--font-size-3xl);font-weight:var(--font-weight-bold);margin:0 0 var(--spacing-md);color:var(--ion-text-color)}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-size-base);color:var(--ion-color-medium);margin:0 0 var(--spacing-lg);line-height:1.5}.error-message[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl) 0}.error-icon[_ngcontent-%COMP%]{font-size:64px;color:var(--ion-color-danger);margin-bottom:var(--spacing-lg)}.error-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:var(--font-size-3xl);font-weight:var(--font-weight-bold);margin:0 0 var(--spacing-md);color:var(--ion-text-color)}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-size-base);color:var(--ion-color-medium);margin:0 0 var(--spacing-lg);line-height:1.5}form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 0;--inner-border-width: 0;--padding-start: 0;--padding-end: 0;--inner-padding-start: 0;--inner-padding-end: 0;overflow:visible!important}"]});let a=c;return a})();export{pe as ResetPasswordPage};
