import{a as $}from"./chunk-NMRW5ISR.js";import{b as Q}from"./chunk-LZJFO7PF.js";import{$b as E,$c as Z,$d as q,Aa as r,Bc as L,I as c,J as m,K as P,L as S,La as O,Mc as N,Nc as R,Oa as f,Ob as V,Pa as C,Qb as D,Qc as j,Rd as J,Sa as M,Ta as w,Ua as T,Uc as G,Vc as U,Xd as Y,Y as l,Yd as X,_c as K,bc as F,ca as y,de as W,ea as I,ja as b,ra as h,rb as k,rc as z,sa as o,ta as s,ua as g,uc as B,vb as A,ya as v,yc as H,za as d}from"./chunk-UC7FKJIZ.js";import"./chunk-TL5KAYV2.js";import"./chunk-XTA6VOZK.js";import"./chunk-ALL2FOAL.js";import"./chunk-7HDUECN2.js";import"./chunk-I3XFR2VW.js";import"./chunk-J7JKH43X.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{i as x}from"./chunk-VBFW7A5V.js";var _=Q("LocalNotifications",{web:()=>import("./chunk-HJ7R4AKQ.js").then(a=>new a.LocalNotificationsWeb)});function tt(a,u){if(a&1&&(o(0,"div",19),f(1),s()),a&2){let n=r();l(),C(n.display)}}function et(a,u){if(a&1&&(o(0,"div",20),f(1),s()),a&2){let n=r();l(),C(n.getStatusLabel())}}function it(a,u){if(a&1){let n=v();o(0,"ion-button",21),d("click",function(){c(n);let e=r();return m(e.openModal())}),g(1,"ion-icon",22),s()}}function nt(a,u){if(a&1){let n=v();o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),f(3,"Set Timer"),s()()(),o(4,"ion-content",23)(5,"ion-input",24),T("ngModelChange",function(e){c(n);let t=r();return w(t.modalHours,e)||(t.modalHours=e),m(e)}),d("ionInput",function(e){c(n);let t=r();return m(t.onInput(e,"hours"))})("keydown",function(e){c(n);let t=r();return m(t.onKeyDown(e))}),s(),o(6,"ion-input",25),T("ngModelChange",function(e){c(n);let t=r();return w(t.modalMinutes,e)||(t.modalMinutes=e),m(e)}),d("ionInput",function(e){c(n);let t=r();return m(t.onInput(e,"minutes"))})("keydown",function(e){c(n);let t=r();return m(t.onKeyDown(e))}),s(),o(7,"ion-input",26),T("ngModelChange",function(e){c(n);let t=r();return w(t.modalSeconds,e)||(t.modalSeconds=e),m(e)}),d("ionInput",function(e){c(n);let t=r();return m(t.onInput(e,"seconds"))})("keydown",function(e){c(n);let t=r();return m(t.onKeyDown(e))}),s(),o(8,"div",27)(9,"ion-button",28),d("click",function(){c(n);let e=r();return m(e.closeModal())}),f(10,"Cancel"),s(),o(11,"ion-button",29),d("click",function(){c(n);let e=r();return m(e.setTimerFromModal())}),f(12,"Set Timer"),s()()()}if(a&2){let n=r();l(5),M("ngModel",n.modalHours),l(),M("ngModel",n.modalMinutes),l(),M("ngModel",n.modalSeconds),l(4),h("disabled",!n.modalHours&&!n.modalMinutes&&!n.modalSeconds)}}var yt=(()=>{let u=class u{constructor(i,e,t){this.headerService=i,this.platform=e,this.alertController=t,this.totalTime=0,this.remainingTime=0,this.display="00:00",this.isRunning=!1,this.isFinished=!1,this.circumference=2*Math.PI*96,this.dashOffset=this.circumference,this.hours=0,this.minutes=0,this.seconds=0,this.isModalOpen=!1,this.modalHours=null,this.modalMinutes=null,this.modalSeconds=null,this.audio=null,K({play:Y,pause:J,refresh:X,stop:q,add:Z,timerOutline:W})}ngOnInit(){return x(this,null,function*(){this.headerService.updateHeaderData({title:"Timer",subtitle:"Countdown timer",image:"timer-outline",imageType:"icon",showBack:!0,showMenu:!0,backNavigationUrl:"/workspace/clock"}),this.platform.is("capacitor")&&(yield _.requestPermissions(),yield _.registerActionTypes({types:[{id:"TIMER_ACTIONS",actions:[{id:"dismiss",title:"Dismiss"}]}]}),_.addListener("localNotificationActionPerformed",i=>{this.clear()}))})}ngOnDestroy(){this.interval&&clearInterval(this.interval),this.stopSound(),this.platform.is("capacitor")&&_.removeAllListeners()}setTimerFromInputs(){(this.hours>0||this.minutes>0||this.seconds>0)&&this.setTimer(this.hours,this.minutes,this.seconds)}openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}setTimerFromModal(){let i=this.modalHours||0,e=this.modalMinutes||0,t=this.modalSeconds||0;(i>0||e>0||t>0)&&(this.setTimer(i,e,t),this.modalHours=null,this.modalMinutes=null,this.modalSeconds=null,this.closeModal())}validateInput(i){i==="hours"?this.modalHours=Math.max(0,Math.min(99,this.modalHours||0)):i==="minutes"?this.modalMinutes=Math.max(0,Math.min(99,this.modalMinutes||0)):i==="seconds"&&(this.modalSeconds=Math.max(0,Math.min(99,this.modalSeconds||0)))}onKeyDown(i){(i.key==="-"||i.key==="e"||i.key==="E")&&i.preventDefault()}onInput(i,e){let t=i.target.value;t.length>2&&(t=t.slice(0,2),i.target.value=t);let p=parseInt(t)||0;e==="hours"?this.modalHours=Math.min(99,p):e==="minutes"?this.modalMinutes=Math.min(99,p):e==="seconds"&&(this.modalSeconds=Math.min(99,p))}setTimer(i,e,t){this.totalTime=i*3600+e*60+t,this.remainingTime=this.totalTime,this.isFinished=!1,this.updateDisplay()}getStatusLabel(){return this.isFinished?"Finished":this.isRunning?"Running":this.totalTime>0?"Paused":"Set Timer"}start(){this.remainingTime>0&&!this.isRunning&&(this.isRunning=!0,this.interval=setInterval(()=>{this.remainingTime--,this.updateDisplay(),this.remainingTime<=0&&this.finish()},1e3))}pause(){this.isRunning=!1,this.interval&&(clearInterval(this.interval),this.interval=null)}reset(){this.pause(),this.remainingTime=this.totalTime,this.isFinished=!1,this.updateDisplay()}clear(){this.pause(),this.totalTime=0,this.remainingTime=0,this.isFinished=!1,this.display="00:00",this.dashOffset=this.circumference,this.stopSound()}finish(){return x(this,null,function*(){this.isRunning=!1,this.isFinished=!0,this.remainingTime=0,this.updateDisplay(),this.interval&&clearInterval(this.interval),this.playSound(),yield this.showNotification()})}playSound(){this.audio=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGGS57OihUBELTKXh8bllHAU2jdXvzn0pBSh+zPDajzsKElyx6OyrWBUIQ5zd8sFuJAUuhM/z24k2CBdju+zooVARC0yl4fG5ZRwFNo3V7859KQUofsz"),this.audio.loop=!0,this.audio.play().catch(i=>console.log("Audio play failed:",i))}stopSound(){this.audio&&(this.audio.pause(),this.audio=null)}showNotification(){return x(this,null,function*(){this.platform.is("capacitor")?yield _.schedule({notifications:[{title:"Timer Complete!",body:"Your countdown timer has finished.",id:1,sound:"default",actionTypeId:"TIMER_ACTIONS",extra:null,ongoing:!0}]}):yield(yield this.alertController.create({header:"Timer Complete!",message:"Your countdown timer has finished.",buttons:[{text:"Dismiss",handler:()=>{this.clear()}}],backdropDismiss:!1})).present()})}updateDisplay(){let i=Math.floor(this.remainingTime/3600),e=Math.floor(this.remainingTime%3600/60),t=this.remainingTime%60;if(i>0?this.display=`${i.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`:this.display=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`,this.totalTime>0){let p=(this.totalTime-this.remainingTime)/this.totalTime;this.dashOffset=this.circumference-p*this.circumference}}};u.\u0275fac=function(e){return new(e||u)(y($),y(F),y(j))},u.\u0275cmp=I({type:u,selectors:[["app-timer"]],decls:21,vars:11,consts:[[1,"timer-container"],[1,"timer-inner-container"],[1,"timer"],[1,"timer-circle"],["width","200","height","200",1,"progress-ring"],["stroke","var(--ion-color-light)","stroke-width","4","fill","transparent","r","96","cx","100","cy","100",1,"background-circle"],["stroke","var(--ion-color-primary)","stroke-width","4","fill","transparent","r","96","cx","100","cy","100",1,"progress-ring-circle"],[1,"time-content"],["class","time-display",4,"ngIf"],["class","time-label",4,"ngIf"],["fill","clear","class","set-timer-btn",3,"click",4,"ngIf"],[1,"timer-modal-small",3,"didDismiss","isOpen"],[1,"floating-buttons"],["color","danger","fill","outline","shape","round",1,"floating-btn","side-btn",3,"click"],["name","stop"],["fill","outline","shape","round",1,"floating-btn","center-btn",3,"click","color","disabled"],[3,"name"],["color","medium","fill","outline","shape","round",1,"floating-btn","side-btn",3,"click"],["name","refresh"],[1,"time-display"],[1,"time-label"],["fill","clear",1,"set-timer-btn",3,"click"],["name","add","size","large"],[1,"ion-padding"],["type","number","labelPlacement","floating","label","Hours","fill","outline","placeholder","0","min","0","max","99",1,"common-input",3,"ngModelChange","ionInput","keydown","ngModel"],["type","number","labelPlacement","floating","label","Minutes","fill","outline","placeholder","0","min","0","max","99",1,"common-input",3,"ngModelChange","ionInput","keydown","ngModel"],["type","number","labelPlacement","floating","label","Seconds","fill","outline","placeholder","0","min","0","max","99",1,"common-input",3,"ngModelChange","ionInput","keydown","ngModel"],[1,"button-group"],[1,"btn-secondary",3,"click"],["fill","solid",1,"btn-primary",3,"click","disabled"]],template:function(e,t){e&1&&(o(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),P(),o(5,"svg",4),g(6,"circle",5)(7,"circle",6),s(),S(),o(8,"div",7),b(9,tt,2,1,"div",8)(10,et,2,1,"div",9)(11,it,2,0,"ion-button",10),o(12,"ion-modal",11),d("didDismiss",function(){return t.closeModal()}),b(13,nt,13,4,"ng-template"),s()()()(),o(14,"div",12)(15,"ion-button",13),d("click",function(){return t.pause()}),g(16,"ion-icon",14),s(),o(17,"ion-button",15),d("click",function(){return t.isRunning?t.pause():t.start()}),g(18,"ion-icon",16),s(),o(19,"ion-button",17),d("click",function(){return t.clear()}),g(20,"ion-icon",18),s()()()()()),e&2&&(l(7),O("stroke-dasharray",t.circumference)("stroke-dashoffset",t.dashOffset),l(2),h("ngIf",t.totalTime>0),l(),h("ngIf",t.totalTime>0),l(),h("ngIf",!t.totalTime),l(),h("isOpen",t.isModalOpen),l(5),h("color",t.isRunning?"warning":"success")("disabled",t.totalTime===0),l(),h("name",t.isRunning?"pause":"play"))},dependencies:[A,k,E,V,D,H,B,U,G,z,L,R,N],styles:[".timer-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;padding:var(--spacing-md)}.timer-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;position:relative;box-shadow:#0000003d 0 3px 8px;border-radius:var(--border-radius-xl);background:var(--ion-card-background);padding:var(--spacing-md);max-width:350px;height:400px;margin:0 auto;gap:var(--spacing-lg)}.timer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-lg);font-family:var(--ion-font-family);position:relative}.timer-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;height:32px}.set-timer-btn[_ngcontent-%COMP%]{--color: var(--ion-color-primary);font-size:var(--font-size-15xl)}.timer-modal-small[_ngcontent-%COMP%]{--width: 80%;--max-width: 320px;--height: 370px;--max-height: 80%}.timer-modal-small[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.timer-modal-small[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.timer-modal-small[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;width:50%}.play-pause-btn[_ngcontent-%COMP%]{--color: var(--ion-color-success);font-size:var(--font-size-15xl);position:absolute;bottom:-20px}.play-pause-card-btn[_ngcontent-%COMP%]{width:60px;height:60px;--border-radius: 50%;--border-width: 2px}.timer-circle[_ngcontent-%COMP%]{width:200px;height:200px;position:relative;display:flex;align-items:center;justify-content:center}.progress-ring[_ngcontent-%COMP%]{position:absolute;top:0;left:0;transform:rotate(-90deg)}.progress-ring-circle[_ngcontent-%COMP%]{transition:none}.time-content[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1}.time-display[_ngcontent-%COMP%]{color:var(--ion-text-color);font-size:var(--font-size-4xl);font-weight:var(--font-weight-black);line-height:1;font-family:var(--ion-font-family);letter-spacing:-1px}.time-label[_ngcontent-%COMP%]{font-size:var(--font-size-md);font-weight:var(--font-weight-medium);color:var(--ion-color-medium);margin-top:var(--spacing-xs);text-transform:uppercase;letter-spacing:1px}.floating-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);align-items:center;justify-content:center;padding-bottom:var(--spacing-md)}.floating-btn[_ngcontent-%COMP%]{--border-width: 2px;--box-shadow: 0 4px 16px rgba(0, 0, 0, .1);--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;background:#fffc}.floating-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--font-size-xl)}.side-btn[_ngcontent-%COMP%]{width:50px;height:50px;--border-radius: 50%}.center-btn[_ngcontent-%COMP%]{width:60px;height:60px;--border-radius: 50%}.center-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--font-size-2xl)}@media (min-width: 769px){.timer[_ngcontent-%COMP%]{max-width:500px}}"]});let a=u;return a})();export{yt as TimerPage};
