<ion-content class="reset-password-content">
  <div class="reset-password-wrapper">
    <div class="form-container">
      <div class="logo-section">
        <div class="logo-circle">
          <img src="assets/icon/ordoo-logo.svg" alt="Ordoo Logo" class="logo-icon">
        </div>
        <h1 class="app-title">Ordoo</h1>
      </div>

      <h2 class="form-title">Reset Password</h2>
      
      <!-- Invalid Token Message -->
      @if (!tokenValid) {
        <div class="error-message">
          <ion-icon name="alert-circle" class="error-icon"></ion-icon>
          <h3>Invalid or Expired Link</h3>
          <p>This password reset link is invalid or has expired. Please request a new one.</p>
          
          <div class="back-to-login">
            <ion-text class="back-link" (click)="navigateToLogin()">
              <ion-icon name="arrow-back-outline"></ion-icon>
              Back to Login
            </ion-text>
          </div>
        </div>
      }
      
      <!-- Success Message -->
      @if (passwordReset) {
        <div class="success-message">
          <ion-icon name="checkmark-circle" class="success-icon"></ion-icon>
          <h3>Password Reset Successful</h3>
          <p>Your password has been successfully reset. You can now login with your new password.</p>
          
          <div class="back-to-login">
            <ion-text class="back-link" (click)="navigateToLogin()">
              <ion-icon name="arrow-back-outline"></ion-icon>
              Back to Login
            </ion-text>
          </div>
        </div>
      }
      
      <!-- Reset Form -->
      @if (tokenValid && !passwordReset) {
        <p class="form-subtitle">Enter your new password</p>

        <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="reset-password-form">
        <ion-item>
          <ion-icon name="lock-closed-outline" class="floating-icon-left"></ion-icon>
          <ion-input class="common-input common-input-design-with-icon-left-and-right" 
            formControlName="password" [type]="showPassword ? 'text' : 'password'" 
            labelPlacement="floating" label="New Password" fill="outline" 
            placeholder="Enter new password" mode="md" 
            errorText="Password must be at least 8 characters">
          </ion-input>
          <ion-icon class="floating-icon-right" [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
            (click)="togglePassword()">
          </ion-icon>
        </ion-item>

        <ion-item>
          <ion-icon name="lock-closed-outline" class="floating-icon-left"></ion-icon>
          <ion-input class="common-input common-input-design-with-icon-left-and-right" 
            formControlName="confirmPassword" [type]="showConfirmPassword ? 'text' : 'password'" 
            labelPlacement="floating" label="Confirm Password" fill="outline" 
            placeholder="Confirm new password" mode="md" 
            errorText="Passwords do not match">
          </ion-input>
          <ion-icon class="floating-icon-right" [name]="showConfirmPassword ? 'eye-off-outline' : 'eye-outline'"
            (click)="toggleConfirmPassword()">
          </ion-icon>
        </ion-item>

          <ion-button class="btn-primary" mode="md" expand="block" type="submit" [disabled]="resetPasswordForm.invalid">
            Reset Password
          </ion-button>
        </form>
        
        <div class="back-to-login">
          <ion-text class="back-link" (click)="navigateToLogin()">
            <ion-icon name="arrow-back-outline"></ion-icon>
            Back to Login
          </ion-text>
        </div>
      }
    </div>
  </div>
</ion-content>
